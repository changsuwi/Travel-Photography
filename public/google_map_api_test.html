<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Info windows</title>
    <style>
    /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */

    #map {
        height: 100%;
    }
    /* Optional: Makes the sample page fill the window. */

    html,
    body {
        height: 100%;
        margin: 0;
        padding: 0;
    }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
    // This example displays a marker at the center of Australia.
    // When the user clicks the marker, an info window opens.
    var item ;
    function get_json(url,callback) {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                if (xhr.status === 200) {
                    // Here the callback gets implemented
                    item = JSON.parse(xhr.responseText);
                    callback(item);
                } else {

                }
            }
        };

        xhr.open("GET", url, true);
        xhr.send();
    }

    function initMap() {
        var uluru = { lat: 25.0894062, lng: 121.8475243 };
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 14,
            center: uluru
        });
        get_json("ajax_data",function(data){ 
          var placeid = data.placeid;
          var name = data.name;
          var hot = data.hot;
          var lat = data.lat;
          var lng = data.lng;
          var point = new google.maps.LatLng(lat,lng);
          var marker = new google.maps.Marker({
            map: map,
            position: point,
            title: name
          });
          console.log(data.placeid);
        });

        var contentString = '<div id="content">' +
            '<div id="siteNotice">' +
            '</div>' +
            '<h1 id="firstHeading" class="firstHeading">Uluru</h1>' +
            '<div id="bodyContent">' +
            '<img src="img/IMG_0735-2.jpg" width="300" height="200" >' +
            '</div>' +
            '</div>';

        var infowindow = new google.maps.InfoWindow({
            content: contentString
        });

        var marker = new google.maps.Marker({
            position: uluru,
            map: map,
            title: 'Uluru (Ayers Rock)'
        });
        marker.addListener('click', function() {
            infowindow.open(map, marker);
        });
    }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeVo8TE2AGQ24zvvwF8otKrCQCtory7rA&callback=initMap">
    </script>
</body>

</html>
